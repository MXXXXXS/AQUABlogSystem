# 评论功能

## 获取评论

GET http(s):xxxxxxx/comments?target=id;max=10
*target为文章id或评论id*

### 查询处理

1. 确定查询起始位置, 依据target
2. 若有记录上一次位置, 则从上一次位置继续查询, 否则从头开始.
3. 按最大数量限制遍历.
4. 若有后续, 记录此次查询的位置. 若没有更多, 则清除该target下的查询位置

### 返回

    {
      finished: Boolean,  //这个选项用于确定"加载更多"功能
      comments:
      [{
        id: String,  //用于确定这条回复的用户名称
        content: String,  //具体评论内容
        hasSubComments: Boolean  //此项可选, 用于确定"显示回复"功能. 没有此项, 表示是评论的子评论; 有此项, 表示是文章的直接评论
       },
       ...
      ]
    }

## 添加评论

POST http(s):xxxxxxx/comments?target=id&article=tilte *target为某篇文章或某文章的直接评论. 对评论的评论通过添加 @id 来实现, 并列存放. article为文章标题, 用于确定collection

### 上传格式

MIME Types: multipart/form-data

content: String  //存放评论内容评论

### 存放处理

1. 寻找是否有target, 判断类型
2. 分配id
3. 若target为某篇文章, 则在对应collection内新增

        {
          id: String,
          content: String,
          subComments: []
        }

4. 若target为某评论, 则在该评论的subComments中添加

       {
         id: String,
         content: String
       }
